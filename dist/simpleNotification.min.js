class SimpleNotification{static options(a){SimpleNotification.default=Object.assign({},SimpleNotification.default,a)}static makeWrapper(a){let b=document.createDocumentFragment(),c=document.createElement("div");c.className="gn-wrapper gn-"+a,b.appendChild(c),document.body.appendChild(b),SimpleNotification.wrappers[a]=c}static firstUnbreakChar(a,b,c=0){0>c&&(c=0);let d;for(;0<=c;)d=a.indexOf(b,c),c=0<d&&"\\"==a[d-1]?d+1:-1;return d}static treeFromText(a,b){b=b.replace(/(\r?\n|\r)/gm,"\n");let c=[],d=0;if(Object.keys(SimpleNotification.tags).forEach(a=>{let e,f,g=SimpleNotification.tags[a],h=0,i={open:g.open.length,close:g.close.length};for(;-1<(e=b.indexOf(g.open,h));){if(e+=i.open,-1<(f=b.indexOf(g.close,e))&&e!=f){let h={type:a,content:b.substring(e,f)};if("title"in g&&g.title&&0<h.content.length)if("!"==h.content[0])h.content=h.content.substring(1);else{let a=SimpleNotification.firstUnbreakChar(h.content,":");h.content=h.content.replace("\\:",":"),-1<a&&(h.title=h.content.substring(0,a),h.content=h.content.substring(a+1))}c.push(h);let j=b.substring(0,e-i.open)+"\\"+d+"\\"+b.substring(f+i.close);b=j,d++}h=e}}),0<c.length){let d=b.split(/\\(\d+)\\/),e=d.length;for(let b=0;b<e;b++)if(0==b%2)a.appendChild(document.createTextNode(d[b]));else{let e=c[parseInt(d[b])],f=SimpleNotification.tags[e.type],g=document.createElement(f.type);"attributes"in f&&Object.keys(f.attributes).forEach(a=>{let b=f.attributes[a].replace("$content",e.content).replace("$title","title"in e?e.title:e.content);g.setAttribute(a,b)});let h;h="textContent"in f?f.textContent.replace("$content",e.content).replace("$title","title"in e?e.title:e.content):e.content,g.textContent=h,g.className=f.class||"",a.appendChild(g)}}else a.textContent=b}static addExtinguish(a){a.target.lastElementChild.classList.add("gn-extinguish")}static removeExtinguish(a){a.target.lastElementChild.classList.remove("gn-extinguish")}static create(a,b=void 0,c=void 0,d=void 0,e={}){let f=null!=d&&""!=d,g=null!=c&&""!=c,h=null!=b&&""!=b;if(!f&&!h&&!g)return;let i=Object.assign({},SimpleNotification.default,e);null==SimpleNotification.wrappers[i.position]&&SimpleNotification.makeWrapper(i.position);let j=document.createDocumentFragment(),k=document.createElement("div");if(k.addEventListener("click",SimpleNotification.destroy.bind(null,k,0)),i.sticky||(k.addEventListener("mouseenter",SimpleNotification.removeExtinguish),k.addEventListener("mouseleave",SimpleNotification.addExtinguish)),k.className="gn-notification gn-insert",a.forEach(a=>{k.classList.add(a)}),h){let a=document.createElement("h1");a.title=b,a.textContent=b,k.appendChild(a)}if(f||g){let a=document.createElement("div");if(a.className="gn-content",f){let b=document.createElement("img");b.src=d,a.appendChild(b)}if(g){let b=document.createElement("p");SimpleNotification.treeFromText(b,c),a.appendChild(b)}k.appendChild(a)}let l;if(!1==i.sticky){l=document.createElement("span"),l.className="gn-lifespan";let a=b=>{if("insert-left"==b.animationName||"insert-right"==b.animationName){if(l.style.animationDuration=i.duration+"ms",document.hasFocus())l.classList.add("gn-extinguish");else{let a=()=>{l.classList.add("gn-extinguish"),document.removeEventListener("focus",a)};document.addEventListener("focus",a)}l.addEventListener("animationend",a=>{"shorten"==a.animationName&&SimpleNotification.destroy(k,i.fadeout)}),k.classList.remove("gn-insert"),k.removeEventListener("animationend",a)}};k.addEventListener("animationend",a),k.appendChild(l)}j.appendChild(k),SimpleNotification.wrappers[i.position].appendChild(j)}static addTag(a,b){SimpleNotification.tags[a]=b}static destroy(a,b){0==b&&a.parentElement.removeChild(a),a.removeEventListener("mouseenter",SimpleNotification.removeExtinguish),a.removeEventListener("mouseleave",SimpleNotification.addExtinguish),a.style.animationDuration=b+"ms",a.classList.add("gn-fadeout"),a.addEventListener("mouseenter",a=>{a.target.classList.remove("gn-fadeout")}),a.addEventListener("mouseleave",a=>{a.target.classList.add("gn-fadeout")}),a.addEventListener("animationend",b=>{"fadeout"==b.animationName&&a.parentElement.removeChild(a)})}static success(a=void 0,b=void 0,c=void 0,d={}){return SimpleNotification.create(["gn-success"],a,b,c,d)}static info(a=void 0,b=void 0,c=void 0,d={}){return SimpleNotification.create(["gn-info"],a,b,c,d)}static error(a=void 0,b=void 0,c=void 0,d={}){return SimpleNotification.create(["gn-error"],a,b,c,d)}static warning(a=void 0,b=void 0,c=void 0,d={}){return SimpleNotification.create(["gn-warning"],a,b,c,d)}static message(a=void 0,b=void 0,c=void 0,d={}){return SimpleNotification.create(["gn-message"],a,b,c,d)}static custom(a,b=void 0,c=void 0,d=void 0,e={}){return SimpleNotification.create(a,b,c,d,e)}}SimpleNotification.wrappers={},SimpleNotification.default={position:"top-right",duration:4e3,fadeout:750,sticky:!1},SimpleNotification.tags={code:{type:"code",class:"gn-code",open:"``",close:"``"},header3:{type:"h3",class:"gn-header",open:"## ",close:"\n"},header2:{type:"h2",class:"gn-header",open:"# ",close:"\n"},link:{type:"a",title:!0,attributes:{href:"$content",target:"blank"},textContent:"$title",open:"{{",close:"}}"},bold:{type:"span",class:"gn-bold",open:"**",close:"**"},italic:{type:"span",class:"gn-italic",open:"*",close:"*"}};